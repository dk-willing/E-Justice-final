<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-Justice Ghana - Citizen Dashboard</title>
    <link rel="stylesheet" href="../css/citizen-dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <!-- Google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="logo">
          <img src="../images/e-justice logo.jpg" alt="E-Justice Ghana logo" />
          <span>E-Justice <span class="highlight">Ghana</span></span>
        </div>

        <div class="user-profile">
          <div class="profile-img">
            <img src="../images/gard.jpeg" alt="User Profile" />
          </div>
          <div>
            <h3>Obed Ayer</h3>
            <p class="user-type">Citizen</p>
          </div>
        </div>

        <nav class="sidebar-nav">
          <a href="../html/citizen-dashboard.html" class="nav-item active">
            <i class="fas fa-home"></i>
            <span>Home</span>
          </a>
          <a href="../html/mycase.html" class="nav-item">
            <i class="fas fa-folder"></i>
            <span>My Cases</span>
          </a>
          <a href="#" class="nav-item" id="openSearch">
            <i class="fas fa-search"></i>
            <span>Search Lawyers</span>
          </a>
          <a href="../html/legal re.html" class="nav-item">
            <i class="fas fa-book"></i>
            <span>Legal Resources</span>
          </a>
          <a href="#" class="nav-item" onclick="openModal()">
            <i class="fas fa-question-circle"></i>
            <span>Support & FAQs</span>
          </a>
        </nav>

        <!-- Special Nav Icons -->
        <div class="nav-item-special">
          <div
            class="nav-icon dark-mode-toggle"
            style="cursor: pointer"
            onclick="document.body.classList.toggle('dark-mode'); 
                              const icon = document.querySelector('#darkModeIcon'); 
                              if(document.body.classList.contains('dark-mode')) { 
                                  icon.className = 'fas fa-sun'; 
                                  localStorage.setItem('darkMode', 'enabled'); 
                              } else { 
                                  icon.className = 'fas fa-moon'; 
                                  localStorage.setItem('darkMode', 'disabled'); 
                              }"
          >
            <i class="fas fa-moon" id="darkModeIcon"></i>
          </div>
          <div class="nav-icon">
            <i class="fas fa-gear"></i>
          </div>
          <div class="nav-icon" id="logout-btn">
            <i class="fas fa-arrow-right-from-bracket"></i>
          </div>
        </div>
      </div>

      <!-- Main Content -->

      <div class="main-content">
        <!-- Header -->
        <div class="header">
          <div class="header-title">
            <h1>Dashboard</h1>
          </div>
          <div class="user-profile-small">
            <img src="../images/e-justice logo.jpg" alt="User profile" />
          </div>
        </div>

        <!-- Welcome Section -->
        <div class="welcome-section">
          <h2>Welcome back, Obed!</h2>
          <p>
            Your legal journey is important to us. Here's an overview of your
            current cases and upcoming appointments.
          </p>
          <div class="action-buttons">
            <button class="btn primary" id="openModalBtn">
              Book Consultation
            </button>
            <button class="btn secondary">View all cases</button>
            <button class="btn emergency">Emergency Legal Help</button>
          </div>
        </div>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
          <!-- Active Cases Section -->
          <div class="section active-cases">
            <div class="section-header">
              <h3>Active Cases</h3>
              <a href="#" class="view-all">View all</a>
            </div>
            <p class="section-subheader">Your ongoing legal cases</p>

            <div class="case-cards">
              <div class="case-card">
                <div class="case-type">Property Dispute Resolution</div>
                <div class="progress-container">
                  <div class="progress-bar" style="width: 80%"></div>
                  <span class="progress-text">80%</span>
                </div>
                <div class="case-details">
                  <div class="lawyer-info">
                    <img src="../images/harvey.jpeg" alt="Lawyer" />
                    <div>
                      <p>Assigned Lawyer:</p>
                      <h4>Richard Martey</h4>
                    </div>
                  </div>
                  <div class="case-actions">
                    <button class="action-btn message">
                      <i class="fas fa-comment"></i>
                    </button>
                    <button class="action-btn details">
                      <i class="fas fa-info-circle"></i>
                    </button>
                  </div>
                </div>
                <div class="case-status">
                  <span class="status active">Active</span>
                </div>
              </div>

              <div class="case-card">
                <div class="case-type">Employment Contract Review</div>
                <div class="progress-container">
                  <div class="progress-bar" style="width: 40%"></div>
                  <span class="progress-text">40%</span>
                </div>
                <div class="case-details">
                  <div class="lawyer-info">
                    <img src="../images/mami.jpg" alt="Lawyer" />
                    <div>
                      <p>Assigned Lawyer:</p>
                      <h4>Jessica Parker</h4>
                    </div>
                  </div>
                  <div class="case-actions">
                    <button class="action-btn message">
                      <i class="fas fa-comment"></i>
                    </button>
                    <button class="action-btn details">
                      <i class="fas fa-info-circle"></i>
                    </button>
                  </div>
                </div>
                <div class="case-status">
                  <span class="status pending">In Progress</span>
                </div>
              </div>

              <div class="case-card">
                <div class="case-type">Child Support Agreement</div>
                <div class="progress-container">
                  <div class="progress-bar" style="width: 95%"></div>
                  <span class="progress-text">95%</span>
                </div>
                <div class="case-details">
                  <div class="lawyer-info">
                    <img src="../images/manny.jpg" alt="Lawyer" />
                    <div>
                      <p>Assigned Lawyer:</p>
                      <h4>Mary Jane</h4>
                    </div>
                  </div>
                  <div class="case-actions">
                    <button class="action-btn message">
                      <i class="fas fa-comment"></i>
                    </button>
                    <button class="action-btn details">
                      <i class="fas fa-info-circle"></i>
                    </button>
                  </div>
                </div>
                <div class="case-status">
                  <span class="status finalizing">Finalizing</span>
                </div>
              </div>
            </div>
            <div class="submit-case">
              <button class="btn primary full-width" onclick="openCaseModal()">
                Submit new case
              </button>
            </div>
          </div>

          <!-- AI Legal Assistant Section -->
          <div class="section ai-assistant">
            <div class="section-header">
              <h3>AI Legal Assistant</h3>
            </div>
            <div class="ai-container">
              <p class="ai-intro">Get answers to your legal questions</p>
              <div class="ai-suggestions">
                <button class="suggestion-btn">
                  <i class="fas fa-file-contract"></i>
                  <span>Basic contracts</span>
                </button>
                <button class="suggestion-btn">
                  <i class="fas fa-home"></i>
                  <span>Rent agreements</span>
                </button>
                <button class="suggestion-btn">
                  <i class="fas fa-gavel"></i>
                  <span>Court process</span>
                </button>
                <button class="suggestion-btn">
                  <i class="fas fa-balance-scale"></i>
                  <span>Your rights</span>
                </button>
              </div>
              <div class="chat-container">
                <div class="chat-header">
                  <div class="avatar">
                    <img
                      src="logo.png"
                      alt="User Avatar"
                      class="avatar-image"
                    />
                  </div>
                  <p>Welcome to E-Justice support!</p>
                </div>

                <div class="chat-body" id="chatBody"></div>

                <div class="chat-footer">
                  <input
                    type="text"
                    id="chatInput"
                    placeholder="Type your message here..."
                  />
                  <span id="sendIcon" class="send-icon disabled"
                    ><i class="fas fa-paper-plane"></i
                  ></span>
                  <div class="footer-icons">
                    <span><i class="fa-solid fa-paperclip"></i></span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Upcoming Appointments Section -->
          <div class="section appointments">
            <div class="section-header">
              <h3>Upcoming Appointments</h3>
              <a href="#" class="view-all">View all</a>
            </div>
            <div class="appointment-cards">
              <div class="appointment-card">
                <div class="appointment-date">
                  <div class="date">15</div>
                  <div class="month">May</div>
                </div>
                <div class="appointment-details">
                  <h4>Case Review Meeting</h4>
                  <p><i class="fas fa-clock"></i> 10:00 AM - 11:30 AM</p>
                  <p><i class="fas fa-map-marker-alt"></i> Virtual Meeting</p>
                </div>
                <div class="appointment-actions">
                  <button class="btn secondary small">Reschedule</button>
                </div>
              </div>

              <div class="appointment-card">
                <div class="appointment-date">
                  <div class="date">22</div>
                  <div class="month">May</div>
                </div>
                <div class="appointment-details">
                  <h4>New Court Hearing</h4>
                  <p><i class="fas fa-clock"></i> 9:00 AM - 12:00 PM</p>
                  <p><i class="fas fa-map-marker-alt"></i> High Court, Accra</p>
                </div>
                <div class="appointment-actions">
                  <button class="btn secondary small">Directions</button>
                </div>
              </div>
            </div>
            <button class="btn outline full-width" id="openModalBtn">
              Book an Appointment
            </button>
          </div>

          <!-- Legal Updates Section -->
          <div class="section legal-updates">
            <div class="section-header">
              <h3>Legal Updates</h3>
              <a href="#" class="view-all">View all</a>
            </div>
            <div class="updates-container">
              <div class="update-card">
                <div class="update-icon">
                  <i class="fas fa-gavel"></i>
                </div>
                <div class="update-details">
                  <h4>Changes to Employment Act</h4>
                  <p>New regulations affecting contract workers</p>
                  <p class="update-date">Published: May 10, 2025</p>
                </div>
              </div>

              <div class="update-card">
                <div class="update-icon">
                  <i class="fas fa-balance-scale"></i>
                </div>
                <div class="update-details">
                  <h4>Supreme Court Ruling</h4>
                  <p>Important decision affecting property rights</p>
                  <p class="update-date">Published: May 5, 2025</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Recent Documents Section -->
          <div class="section documents">
            <div class="section-header">
              <h3>Recent Documents</h3>
              <a href="#" class="view-all">View all documents</a>
            </div>
            <div class="document-cards">
              <div class="document-card">
                <div class="document-icon">
                  <i class="fas fa-file-pdf"></i>
                </div>
                <div class="document-details">
                  <h4>Property_Deed.pdf</h4>
                  <p>Uploaded: 3 days ago</p>
                </div>
                <button class="download-btn">
                  <i class="fas fa-download"></i>
                </button>
              </div>

              <div class="document-card">
                <div class="document-icon">
                  <i class="fas fa-file-word"></i>
                </div>
                <div class="document-details">
                  <h4>Contract_Draft_v2.docx</h4>
                  <p>Uploaded: 1 week ago</p>
                </div>
                <button class="download-btn">
                  <i class="fas fa-download"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div id="consultationModal" class="popup" style="display: none">
      <div class="popup-box">
        <!-- Close Button -->
        <span id="closeModalBtn" class="close-btn">&times;</span>

        <!-- Modal Form -->
        <h2>Book a Consultation</h2>
        <form id="bookingForm" class="form-container" netlify>
          <label for="name">Name</label>
          <input
            type="text"
            id="name"
            placeholder="Your Name"
            required
            class="form-input"
          />

          <label for="email" class="form-label">Email</label>
          <input
            type="email"
            id="email"
            placeholder="Your Email"
            required
            class="form-input"
          />

          <label for="date" class="form-label">Date</label>
          <input type="date" id="date" required class="form-input" />

          <label for="message" class="form-label">Message</label>
          <textarea
            id="message"
            placeholder="Your Message"
            class="form-textarea"
          ></textarea>

          <button type="submit" class="action-btn">Submit</button>
        </form>
      </div>
    </div>

    <!-- Search Modal -->
    <div id="searchModal" class="search-modal">
      <div class="search-box">
        <span class="close-search" id="closeSearch">&times;</span>
        <h2>Search</h2>
        <div class="input-box">
          <input type="text" class="search-input" placeholder="Type here..." />
          <button class="search-action-btn">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Modal 3 -->
    <div id="faq-modal" class="faq-modal">
      <div class="faq-modal-content">
        <span class="faq-close" onclick="closeModal()">&times;</span>
        <h2>FAQ & Support</h2>
        <div class="accordion">
          <div class="accordion-item">
            <button class="accordion-btn">
              How can I check my case status?
            </button>
            <div class="accordion-content">
              <p>You can check your case status in the Active Cases section.</p>
            </div>
          </div>
          <div class="accordion-item">
            <button class="accordion-btn">How do I contact my lawyer?</button>
            <div class="accordion-content">
              <p>Click on the chat icon next to your assigned lawyer.</p>
            </div>
          </div>
          <div class="accordion-item">
            <button class="accordion-btn">Need further assistance?</button>
            <div class="accordion-content">
              <p>Contact our support team at support@example.com.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Case Modal -->
    <div id="case-modal" class="modal-case" style="display: none">
      <div class="modal-case-content">
        <span class="close-case" onclick="closeCaseModal()">&times;</span>
        <h2>Submit a New Case</h2>
        <form id="case-form" netlify>
          <label for="case-title">Case Title:</label>
          <input type="text" id="case-title" class="case-input" required />

          <label for="case-description">Case Description:</label>
          <textarea
            id="case-description"
            class="case-textarea"
            required
          ></textarea>

          <label for="case-file">Attach file: </label>
          <input type="file" name="case-file" id="case-file" />

          <button type="submit" class="case-submit-btn">Submit</button>
        </form>
        <div id="case-confirmation" class="case-confirmation hidden">
          <p>Your case is being reviewed. You will receive updates shortly.</p>
        </div>
      </div>
    </div>

    <script src="../javaScript/citizen-dashboard.js"></script>
    <script>
      function openModal() {
        document.getElementById("faq-modal").style.display = "flex";
      }
      function closeModal() {
        document.getElementById("faq-modal").style.display = "none";
      }
      window.onclick = function (event) {
        if (event.target === document.getElementById("faq-modal")) {
          closeModal();
        }
      };

      document.querySelectorAll(".accordion-btn").forEach((button) => {
        button.addEventListener("click", function () {
          this.classList.toggle("active");
          const content = this.nextElementSibling;
          if (content.style.display === "block") {
            content.style.display = "none";
          } else {
            content.style.display = "block";
          }
        });
      });

      let caseUnderReview = false;

      function openCaseModal() {
        if (caseUnderReview) {
          alert(
            "You cannot submit a new case until your previous case is reviewed."
          );
          return;
        }
        document.getElementById("case-modal").style.display = "flex";
      }

      function closeCaseModal() {
        document.getElementById("case-modal").style.display = "none";
      }

      document
        .getElementById("case-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          caseUnderReview = true;
          document.getElementById("case-form").style.display = "none";
          document.getElementById("case-confirmation").style.display = "block";
        });

      window.onclick = function (event) {
        if (event.target === document.getElementById("case-modal")) {
          closeCaseModal();
        }
      };

      document.addEventListener("DOMContentLoaded", () => {
        const chatBody = document.getElementById("chatBody");
        const chatInput = document.getElementById("chatInput");
        const sendIcon = document.getElementById("sendIcon");
        let isTyping = false;
        let userName = ""; // Variable to store user's name

        // E-Justice Ghana Legal Knowledge Base
        const legalKnowledge = {
          greeting: (name) => `Hello${
            name ? " " + name : ""
          }! ðŸ‘‹ Welcome to E-Justice Ghana Legal Support. 

I'm here to help you navigate Ghana's legal system. You can ask me about:
â€¢ Court procedures
â€¢ Filing lawsuits
â€¢ Small claims
â€¢ Divorce
â€¢ Land disputes
â€¢ Human rights
â€¢ Our services

How may I assist you today?`,

          "court procedures": (name) => `${
            name ? name + ", " : ""
          }in Ghana's judicial system:
1. Cases begin at the appropriate court level
2. Plaintiff files writ of summons
3. Defendant responds within 14 days
4. Case management conference
5. Trial with witness examination
6. Judgment and possible appeals

Would you like me to explain any part in more detail?`,

          "filing a lawsuit": (name) => `${
            name ? name + ", " : ""
          }to file a lawsuit through E-Justice Ghana:
1. Visit our portal at www.ejusticeghana.gov.gh
2. Complete our online case assessment
3. Upload supporting documents
4. Pay filing fees
5. We prepare and file all documents
6. You'll receive case status updates

Would you like the link to our filing portal?`,

          "small claims": (name) => `${
            name ? name + ", " : ""
          }for small claims under GHS 50,000:
â€¢ Handled by District Courts
â€¢ Simplified procedures available
â€¢ E-Justice Ghana offers:
  - Online filing
  - Document preparation
  - Court fee calculator
  - Case tracking

I can guide you through the process step-by-step if you'd like.`,

          "divorce process": (name) => `${
            name ? name + ", " : ""
          }for divorce in Ghana:
1. Assessment of marriage breakdown
2. Counseling referral (if needed)
3. Petition drafting and filing
4. Service of process
5. Final decree processing

This follows the Matrimonial Causes Act, 1971. Would you like more details about any step?`,

          "land disputes": (name) => `${
            name ? name + ", " : ""
          }for land disputes:
â€¢ Title verification services
â€¢ Dispute resolution documents
â€¢ Electronic filing for Land Court
â€¢ Surveyor/lawyer referrals
â€¢ Case tracking

All services comply with the Land Act, 2020. How can I assist you specifically with land matters?`,

          "human rights": (name) => `${
            name ? name + ", " : ""
          }for human rights issues:
1. Online violation reporting
2. CHRAJ complaint preparation
3. High Court filings
4. Legal aid referrals
5. Case monitoring

Protected under Ghana's 1992 Constitution. Would you like help with a specific rights issue?`,

          contact: (name) => `${
            name ? name + ", " : ""
          }you can contact E-Justice Ghana at:
â€¢ Website: www.ejusticeghana.gov.gh
â€¢ Hotline: 0300 123 4567
â€¢ WhatsApp: 0244 123 4567
â€¢ Email: info@ejusticeghana.gov.gh
â€¢ Offices: Accra, Kumasi, Tamale, Takoradi

Our team is ready to assist you personally.`,

          services: (name) => `${name ? name + ", " : ""}E-Justice Ghana offers:
1. Electronic case filing
2. Document preparation
3. Legal process guidance
4. Court fee payments
5. Case tracking
6. Lawyer referral
7. Legal education

All available via our web portal and mobile app. Which service are you interested in?`,

          thanks: (name) =>
            `You're very welcome${
              name ? " " + name : ""
            }! ðŸ˜Š It's my pleasure to help. Remember, E-Justice Ghana is here whenever you need legal assistance. Have a great day!`,

          default: (name) => `${
            name ? name + ", " : ""
          }I'm here to help with Ghana's legal processes. Could you please tell me more about what you need help with? For example:
- "How do I file a small claim?"
- "What's the process for divorce?"
- "I need help with a land dispute"`,

          nameResponse: (name) =>
            `Nice to meet you, ${name}! ðŸ˜Š How can I assist you with your legal questions today?`,
        };

        // Function to extract name from messages
        function extractName(message) {
          const namePatterns = [
            /my name is (\w+)/i,
            /i am (\w+)/i,
            /call me (\w+)/i,
            /this is (\w+)/i,
            /^(\w+)$/i,
          ];

          for (const pattern of namePatterns) {
            const match = message.match(pattern);
            if (match && match[1]) {
              return (
                match[1].charAt(0).toUpperCase() +
                match[1].slice(1).toLowerCase()
              );
            }
          }
          return null;
        }

        // Enhanced response function with personalization
        function getLegalResponse(userMessage) {
          const lowerMessage = userMessage.toLowerCase();

          // Check for name in message
          const extractedName = extractName(userMessage);
          if (extractedName && !userName) {
            userName = extractedName;
            return legalKnowledge["nameResponse"](userName);
          }

          // Check for greetings
          if (
            lowerMessage.includes("hello") ||
            lowerMessage.includes("hi") ||
            lowerMessage.includes("hey")
          ) {
            return legalKnowledge["greeting"](userName);
          }

          // Check for thanks
          if (lowerMessage.includes("thank")) {
            return legalKnowledge["thanks"](userName);
          }

          // Legal topics
          if (
            lowerMessage.includes("court procedure") ||
            lowerMessage.includes("court process")
          ) {
            return legalKnowledge["court procedures"](userName);
          } else if (
            lowerMessage.includes("file") &&
            (lowerMessage.includes("case") || lowerMessage.includes("lawsuit"))
          ) {
            return legalKnowledge["filing a lawsuit"](userName);
          } else if (
            lowerMessage.includes("small claim") ||
            lowerMessage.includes("money claim")
          ) {
            return legalKnowledge["small claims"](userName);
          } else if (
            lowerMessage.includes("divorce") ||
            lowerMessage.includes("marriage end")
          ) {
            return legalKnowledge["divorce process"](userName);
          } else if (
            lowerMessage.includes("land") ||
            lowerMessage.includes("property")
          ) {
            return legalKnowledge["land disputes"](userName);
          } else if (
            lowerMessage.includes("human right") ||
            lowerMessage.includes("right violation")
          ) {
            return legalKnowledge["human rights"](userName);
          } else if (
            lowerMessage.includes("contact") ||
            lowerMessage.includes("office") ||
            lowerMessage.includes("help")
          ) {
            return legalKnowledge["contact"](userName);
          } else if (
            lowerMessage.includes("service") ||
            lowerMessage.includes("offer") ||
            lowerMessage.includes("provide")
          ) {
            return legalKnowledge["services"](userName);
          } else {
            return legalKnowledge["default"](userName);
          }
        }

        // UI Functions (unchanged but included for completeness)
        function appendMessage(text, sender) {
          const messageDiv = document.createElement("div");
          messageDiv.className = `chat-message ${sender}`;
          messageDiv.innerHTML = `<p>${text.replace(/\n/g, "<br>")}</p>`;
          chatBody.appendChild(messageDiv);
          chatBody.scrollTop = chatBody.scrollHeight;
        }

        function showTypingIndicator() {
          if (isTyping) return;
          isTyping = true;
          const typingDiv = document.createElement("div");
          typingDiv.className = "chat-typing";
          typingDiv.innerHTML = `
            <div class="typing-indicator">
                <span></span><span></span><span></span>
            </div>
        `;
          chatBody.appendChild(typingDiv);
          chatBody.scrollTop = chatBody.scrollHeight;
        }

        function removeTypingIndicator() {
          const typingDiv = document.querySelector(".chat-typing");
          if (typingDiv) typingDiv.remove();
          isTyping = false;
        }

        function botReply(userMessage) {
          showTypingIndicator();
          setTimeout(() => {
            removeTypingIndicator();
            const botResponse = getLegalResponse(userMessage);
            appendMessage(botResponse, "bot");
          }, 1000);
        }

        // Event Listeners
        sendIcon.addEventListener("click", () => {
          const message = chatInput.value.trim();
          if (message === "") return;

          appendMessage(message, "user");
          chatInput.value = "";
          sendIcon.classList.add("disabled");
          botReply(message);
        });

        chatInput.addEventListener("input", () => {
          if (chatInput.value.trim() !== "") {
            sendIcon.classList.remove("disabled");
            sendIcon.classList.add("active");
          } else {
            sendIcon.classList.add("disabled");
            sendIcon.classList.remove("active");
          }
        });

        chatInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && chatInput.value.trim() !== "") {
            sendIcon.click();
          }
        });

        // Initial friendly greeting
        setTimeout(() => {
          appendMessage(legalKnowledge["greeting"](userName), "bot");
        }, 500);
      });
    </script>
  </body>
</html>
